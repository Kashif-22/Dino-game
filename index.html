<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dino Coin Collector – 3 Hearts</title>
<style>
body { margin:0; overflow:hidden; background:#87CEEB; font-family:Arial;}
#score, #coins, #hearts { position:absolute; top:10px; color:white; font-size:20px; z-index:2;}
#score { left:10px; }
#coins { left:150px; }
#hearts { right:10px; }
canvas { display:block; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<div id="coins">Coins: 0</div>
<div id="hearts">❤️❤️❤️</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let groundY = canvas.height - 100;
let dino = { x:50, y:groundY, w:50, h:50, vy:0, jumpPower:12, grounded:true, isJumping:false };
let gravity = 0.4;
let coins = [];
let frame = 0;
let score = 0;
let coinCount = 0;
let hearts = 3;

// Dino color animation
let dinoColor = ['#0a0','#0f0','#0c0'];
let dinoFrame = 0;

// Jump on touch
canvas.addEventListener('touchstart', ()=>{
    if(dino.grounded){
        dino.vy = -dino.jumpPower;
        dino.grounded = false;
        dino.isJumping = true; // mark jumping
    }
});

// Game loop
function update(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Background
    ctx.fillStyle = '#228B22';
    ctx.fillRect(0,groundY,canvas.width,canvas.height-groundY); // ground
    ctx.fillStyle = '#87CEEB';
    ctx.fillRect(0,0,canvas.width,groundY); // sky

    // Dino physics
    dino.vy += gravity;
    dino.y += dino.vy;
    if(dino.y > groundY){
        dino.y = groundY;
        dino.vy = 0;
        dino.grounded = true;
        dino.isJumping = false; // landed
    }

    // Draw Dino
    ctx.fillStyle = dinoColor[dinoFrame % dinoColor.length];
    ctx.fillRect(dino.x,dino.y-dino.h,dino.w,dino.h);
    if(frame % 15 === 0) dinoFrame++;

    // Coins spawn
    if(frame % 150 === 0){
        coins.push({x:canvas.width, y:groundY-100, w:20, h:20});
    }

    // Move coins and collect
    for(let i=0;i<coins.length;i++){
        coins[i].x -= 2; // coin speed

        ctx.fillStyle='yellow';
        ctx.fillRect(coins[i].x, coins[i].y-coins[i].h, coins[i].w, coins[i].h);

        // Collect coin only if dino is jumping
        if(dino.isJumping &&
           dino.x < coins[i].x + coins[i].w &&
           dino.x + dino.w > coins[i].x &&
           dino.y > coins[i].y - coins[i].h){
            coinCount++;
            coins.splice(i,1);
            i--;
        } else if(coins[i].x + coins[i].w < dino.x) {
            // Missed coin → lose heart
            hearts--;
            updateHearts();
            coins.splice(i,1);
            i--;
            if(hearts <= 0){
                alert("Game Over! Score: "+score+" | Coins: "+coinCount);
                location.reload();
            }
        }
    }

    // Update score
    score++;
    document.getElementById('score').innerText = "Score: "+score;
    document.getElementById('coins').innerText = "Coins: "+coinCount;

    frame++;
    requestAnimationFrame(update);
}

function updateHearts(){
    let heartStr = '';
    for(let i=0;i<hearts;i++) heartStr += '❤️';
    document.getElementById('hearts').innerText = heartStr;
}

update();
</script>
</body>
</html>